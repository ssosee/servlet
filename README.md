# MVC 1í¸ ì‹¤ìŠµ(with ê¹€ì˜í•œ)

## ëª©í‘œ
ì„œë¸”ë¦¿ì˜ ê¸°ëŠ¥ê³¼ ê¸°ë³¸ì ì¸ MVCíŒ¨í„´ì„ ì´í•´í•˜ì

## MVC íŒ¨í„´ ê°œìš”
### *ë„ˆë¬´ ë§ì€ ì—­í• *

`í•˜ë‚˜ì˜ ì„œë¸”ë¦¿`ì´ë‚˜ `JSP`ë§Œìœ¼ë¡œ `ë¹„ì§€ë‹ˆìŠ¤ ë¡œì§`ê³¼ `ë·° ë Œë”ë§`ê¹Œì§€ `ëª¨ë‘ ì²˜ë¦¬`í•˜ê²Œ ë˜ë©´, `ë„ˆë¬´ ë§ì€ ì—­í• `ì„ í•˜ê²Œë¨.<br>
`ê²°ê³¼ì ìœ¼ë¡œ ìœ ì§€ë³´ìˆ˜ê°€ ì–´ë ¤ì›€.`<br>
HTML ì½”ë“œ í•˜ë‚˜ ìˆ˜ì •í•´ì•¼ í•˜ëŠ”ë°, ìˆ˜ë°±ì¤„ì˜ ìë°” ì½”ë“œê°€ í•¨ê»˜ ìˆë‹¤ê³  ìƒê°í•´ë³´ì.. ğŸ™€<br>

### *ë³€ê²½ì˜ ë¼ì´í”„ ì‚¬ì´í´*

`ë·°`ì™€ `ë¹„ì§€ë‹ˆìŠ¤ ë¡œì§`ì˜ ë³€ê²½ì˜ `ë¼ì´í”„ ì‚¬ì´í´`ì´ `ë‹¤ë¥´ë‹¤.!`<br>
ì´ë ‡ê²Œ ë³€ê²½ì˜ ë¼ì´í”„ ì‚¬ì´í´ì´ ë‹¤ë¥¸ ë¶€ë¶„ì„ í•˜ë‚˜ì˜ ì½”ë“œë¡œ ê´€ë¦¬í•˜ëŠ” ê²ƒì€ ìœ ì§€ë³´ìˆ˜í•˜ê¸° ì¢‹ì§€ ì•Šë‹¤.

### *ê¸°ëŠ¥ íŠ¹í™”*

`JSP ê°™ì€ ë·° í…œí”Œë¦¿ì€ í™”ë©´ì„ ë Œë”ë§ í•˜ëŠ”ë° ìµœì í™”` ë˜ì–´ìˆê¸° ë•Œë¬¸ì— ì´ ë¶€ë¶„ì˜ ì—…ë¬´ë§Œ ë‹´ë‹¹í•˜ëŠ” ê²ƒì´ ê°€ì¥ íš¨ê³¼ì !

### *Model View Controller*
<p align="center">
    <img alt="img.png" src="MVC.png"/>
</p>

**ì»¨íŠ¸ë¡¤ëŸ¬**
* HTTPìš”ì²­ì„ ë°›ì•„ì„œ `íŒŒë¼ë¯¸í„°ë¥¼ ê²€ì¦`í•˜ê³ , `ë¹„ì§€ë‹ˆìŠ¤ ë¡œì§ì„ ì‹¤í–‰`í•œë‹¤.
ê·¸ë¦¬ê³  `ë·°ì— ì „ë‹¬í•  ê²°ê³¼ ë°ì´í„°ë¥¼ ì¡°íšŒ`í•´ì„œ `ëª¨ë¸ì— ë‹´ëŠ”ë‹¤.`<br>

**ëª¨ë¸**
* `ë·°ì— ì¶œë ¥í•  ë°ì´í„°ë¥¼ ë‹´ì•„ë‘”ë‹¤.` 
ë·°ê°€ í•„ìš”í•œ ë°ì´í„°ë¥¼ ëª¨ë‘ ëª¨ë¸ì— ë‹´ì•„ì„œ ì „ë‹¬í•´ì£¼ëŠ” ë•ë¶„ì— ë·°ëŠ” `ë¹„ì§€ë‹ˆìŠ¤ ë¡œì§ì´ë‚˜ ë°ì´í„° ì ‘ê·¼ì„ ëª°ë¼ë„ ë˜ê³ , 
í™”ë©´ì„ ë Œë”ë§í•˜ëŠ” ì¼ì— ì§‘ì¤‘`í•  ìˆ˜ ìˆë‹¤.<br>

**ë·°**
* `ëª¨ë¸ì— ë‹´ê²¨ìˆëŠ” ë°ì´í„°ë¥¼ ì‚¬ìš©í•´ì„œ í™”ë©´ì„ ê·¸ë¦¬ëŠ” ì¼`ì— ì§‘ì¤‘í•œë‹¤.
ì—¬ê¸°ì„œëŠ” HTMLì„ ìƒì„±í•˜ëŠ” ë¶€ë¶„ì„ ë§í•œë‹¤.<br><br>


## MVC íŒ¨í„´ ì ìš©
`/hello/servlet/web/servletmvc/***.java`<br>
`webapp/WEB-INF/views/***.jsp`<br>
ì— ì‹¤ìŠµì„ ì§„í–‰í•¨.(ì‹¤ìŠµì—ì„œëŠ” ì„œë¹„ìŠ¤ë¥¼ ë¶„ë¦¬í•˜ì—¬ êµ¬í˜„í•˜ì§€ëŠ” ì•Šì•˜ë‹¤.)

```java
/**
 * MVC íŒ¨í„´ ì ìš©
 * ì„œë¸”ë¦¿: ì»¨íŠ¸ë¡¤ëŸ¬
 * JSP: ë·°
 * ëª¨ë¸: HttpServletRequest ê°ì²´
 * (requestëŠ” ë‚´ë¶€ì— ë°ì´í„° ì €ì¥ì†Œë¥¼ ê°–ê³  ìˆëŠ”ë°,
 * request.setAttribute(), request.getAttribute()ë¥¼ ì‚¬ìš©í•˜ë©´ ë°ì´í„°ë¥¼ ë³´ê´€í•˜ê³  ì¡°íšŒ ê°€ëŠ¥)
 */
@WebServlet(name = "mvcMemberFormServlet", urlPatterns = "/servlet-mvc/members/new-form")
public class MvcMemberFormServlet extends HttpServlet {
    /**
     * í´ë¼ì´ì–¸íŠ¸ì—ì„œ MvcMemberFormServlet í˜¸ì¶œ
     * MvcMemberFormServletì˜ serviceì—ì„œ jsp í˜¸ì¶œ(forwardì´ê¸° ë•Œë¬¸ì— ì„œë²„ ë‚´ë¶€ì—ì„œ í˜¸ì¶œí•œë‹¤.)
     */
    @Override
    protected void service(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        /**
         * WEB-INF ì´ ê²½ë¡œì•ˆì— JSPê°€ ìˆìœ¼ë©´ ì™¸ë¶€ì—ì„œ ì§ì ‘ JSPë¥¼ í˜¸ì¶œí•  ìˆ˜ ì—†ë‹¤.
         * í•­ìƒ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ í†µí•´ì„œ JSPë¥¼ í˜¸ì¶œí•˜ëŠ” ê²ƒ
         */
        String viewPath ="/WEB-INF/views/new-form.jsp";
        RequestDispatcher dispatcher = request.getRequestDispatcher(viewPath);
        /**
         * ë‹¤ë¥¸ ì„œë¸”ë¦¿ì´ë‚˜ JSPë¡œ ì´ë™í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ì´ë‹¤.
         * ì„œë²„ ë‚´ë¶€ì—ì„œ í˜¸ì¶œì´ ë°œìƒ
         */
        dispatcher.forward(request, response);

        /**
         * redirect vs forward
         * ë¦¬ë‹¤ì´ë ‰íŠ¸ëŠ” ì‹¤ì œ í´ë¼ì´ì–¸íŠ¸ì— ì‘ë‹µì´ ë‚˜ê°”ë‹¤ê°€, í´ë¼ì´ì–¸íŠ¸ê°€ ë¦¬ë‹¤ì´ë ‰íŠ¸ ê²½ë¡œë¡œ ë‹¤ì‹œ ìš”ì²­í•œë‹¤.
         * ë”°ë¼ì„œ í´ë¼ì´ì–¸íŠ¸ê°€ ì¸ì§€í•  ìˆ˜ ìˆê³ , URL ê²½ë¡œë„ ì‹¤ì œë¡œ ë³€ê²½
         * ë°˜ë©´ì—, í¬ì›Œë“œëŠ” ì„œë²„ ë‚´ë¶€ì—ì„œ ì¼ì–´ë‚˜ëŠ” í˜¸ì¶œì´ê¸° ë•Œë¬¸ì— í´ë¼ì´ì–¸íŠ¸ê°€ ì¸ì‹ í•  ìˆ˜ ì—†ë‹¤.
         */
    }
}
```
```java
@WebServlet(name = "mvcMemberListServlet", urlPatterns = "/servlet-mvc/members")
public class MvcMemberListServlet extends HttpServlet {
    private MemberRepository memberRepository = MemberRepository.getInstance();

    @Override
    protected void service(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        List<Member> members = memberRepository.findAll();
        request.setAttribute("members", members);

        String viewPath = "/WEB-INF/views/members.jsp";
        RequestDispatcher dispatcher = request.getRequestDispatcher(viewPath);
        dispatcher.forward(request, response);
    }
}
```
```java
@WebServlet(name = "mvcMemberSaveServlet", urlPatterns = "/servlet-mvc/members/save")
public class MvcMemberSaveServlet extends HttpServlet {

    MemberRepository memberRepository = MemberRepository.getInstance();

    @Override
    protected void service(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        String username = request.getParameter("username");
        int age = Integer.parseInt(request.getParameter("age"));

        Member member = new Member(username, age);
        memberRepository.save(member);

        /**
         * Modelì— ë°ì´í„°ë¥¼ ë³´ê´€
         */
        request.setAttribute("member", member);

        String viewPath ="/WEB-INF/views/save-result.jsp";
        RequestDispatcher dispatcher = request.getRequestDispatcher(viewPath);
        dispatcher.forward(request, response);
    }
}
```
ğŸ˜­ ì‹¤ìŠµì„ ì§„í–‰í•˜ë©´ì„œ ê³„ì† ê°™ì€ ì½”ë“œë¥¼ ```ë°˜ë³µ```í•œë‹¤ëŠ” ëŠë‚Œì„ ë°›ì•˜ë‹¤.

## MVC íŒ¨í„´ í•œê³„
MVC íŒ¨í„´ì„ ì ìš©í•œ ë•ë¶„ì— **ì»¨íŠ¸ë¡¤ëŸ¬ì˜ ì—­í• ê³¼ ë·°ë¥¼ ë Œë”ë§í•˜ëŠ” ì—­í• ì„ ëª…í™•í•˜ê²Œ êµ¬ë¶„**í•  ìˆ˜ ìˆë‹¤.<br>
íŠ¹íˆ ë·°ëŠ” í™”ë©´ì„ ê·¸ë¦¬ëŠ” ì—­í• ì— ì¶©ì‹¤í•œ ë•ë¶„ì—, ì½”ë“œê°€ ê¹”ê¸ˆí•˜ê³  ì§ê´€ì ì´ë‹¤.<br>
ë‹¨ìˆœí•˜ê²Œ ëª¨ë¸ì—ì„œ í”¼ë£¡í•œ ë°ì´í„°ë¥¼ êº¼ë‚´ê³ , í™”ë©´ì„ ë§Œë“¤ë©´ ëœë‹¤. <br>
ê·¸ëŸ°ë° **ì»¨íŠ¸ë¡¤ëŸ¬ëŠ” ë”±ë´ë„ ì¤‘ë³µì´ ë§ê³ , í•„ìš”í•˜ì§€ ì•ŠëŠ” ì½”ë“œ**ë“¤ë„ ë§ì´ ë³´ì¸ë‹¤.<br>

*viewPahtì— ì¤‘ë³µ*
```java
String viewPath ="/WEB-INF/views/save-result.jsp";
```

*í¬ì›Œë“œ ì¤‘ë³µ*

````java
    RequestDispatcher dispatcher = request.getRequestDispatcher(viewPath);
    dispatcher.forward(request, response);
````

ë§Œì•½ jspê°€ ì•„ë‹Œ thymeleafê°™ì€ ë‹¤ë¥¸ ë·°ë¡œ ë³€ê²½í•´ì•¼í•œë‹¤ë©´ ì „ì²´ ì½”ë“œë¥¼ ë‹¤ ë³€ê²½í•´ì•¼ í•œë‹¤.
* prefix: `/WEB-INF/views`
* suffix: `.jsp`

*ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ì½”ë“œ*

responseëŠ” í˜„ì¬ ì½”ë“œì—ì„œ ì‚¬ìš©ë˜ì§€ ì•ŠëŠ”ë‹¤.
```java
HttpServletRequest request, HttpServletResponse response
```
`HttpServletRequest request`, `HttpServletResponse response`ë¥¼ ì‚¬ìš©í•˜ëŠ” ì½”ë“œëŠ” í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ë¥¼ ì‘ì„±í•˜ê¸°ì—ë„ ì–´ë ¤ì›€...


*ê³µí†µì²˜ë¦¬ì˜ ì–´ë ¤ì›€*

ê¸°ëŠ¥ì´ ë³µì¡í•´ì§ˆìˆ˜ë¡ ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ ê³µí†µìœ¼ë¡œ ì²˜ë¦¬í•´ì•¼ í•˜ëŠ” ë¶€ë¶„ì´ ì ì  ë” ë§ì´ ì¦ê°€í•  ê²ƒì´ë‹¤.<br>
ë‹¨ìˆœíˆ ê³µí†µ ê¸°ëŠ¥ì„ ë©”ì„œë“œë¡œ ë½‘ìœ¼ë©´ ë  ê²ƒ ê°™ì§€ë§Œ, ê²°ê³¼ì ìœ¼ë¡œ í•´ë‹¹ ë©”ì„œë“œë¥¼ í•­ìƒ í˜¸ì¶œ í•´ì•¼í•˜ê³ , ì‹¤ìˆ˜ë¡œ í˜¸ì¶œí•˜ì§€ ì•Šìœ¼ë©´ ë¬¸ì œê°€ ë°œìƒ!!<br>
ê·¸ë¦¬ê³  í˜¸ì¶œí•˜ëŠ” ê²ƒ ìì²´ë„ ì¤‘ë³µ..<br>

*ê²°ë¡ *

ê³µí†µ ì²˜ë¦¬ê°€ ì–´ë µë‹¤!!<br>
ì´ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ì„œëŠ” ì»¨íŠ¸ë¡¤ëŸ¬ í˜¸ì¶œ ì „ì— ë¨¼ì € ê³µí†µ ê¸°ëŠ¥ì„ ì²˜ë¦¬í•´ì•¼í•œë‹¤.<br>
> ì¦‰, **ìˆ˜ë¬¸ì¥ ì—­í• **ì„ í•˜ëŠ” ê¸°ëŠ¥ì´ í•„ìš”

**í”„ë¡ íŠ¸ ì»¨íŠ¸ë¡¤ëŸ¬(Front Controller)íŒ¨í„´**ì„ ë„ì…í•˜ë©´ ì´ëŸ¬í•œ ë¬¸ì œë¥¼ ê¹”ë”í•˜ê²Œ í•´ê²°í•  ìˆ˜ ìˆë‹¤.
> ì…êµ¬ë¥¼ í•˜ë‚˜ë¡œ!<br><br>
> <p align="center"><img alt="front-controller.png" src="front-controller.png"/></p>
ìŠ¤í”„ë§ MVCì˜ í•µì‹¬ë„ ë°”ë¡œ ì´ **Front Controller**ì— ìˆë‹¤.
